(function(n){function u(n){return Math.sin((n-(n-Math.PI)/8/Math.PI)/2)}function r(n,t,i,r,f){var o=0,s=t-n,h=Math.abs(s),e=i;return r==!1&&(e+=f),e>0&&h>.01&&h<6.282&&(o=parseFloat(e)/2/u(s)),o}function f(t,i,r){var u,f;if(r=r||{},r.axesDefaults=r.axesDefaults||{},r.legend=r.legend||{},r.seriesDefaults=r.seriesDefaults||{},u=!1,r.seriesDefaults.renderer==n.jqplot.PieRenderer)u=!0;else if(r.series)for(f=0;f<r.series.length;f++)r.series[f].renderer==n.jqplot.PieRenderer&&(u=!0);u&&(r.axesDefaults.renderer=n.jqplot.PieAxisRenderer,r.legend.renderer=r.legend.renderer||n.jqplot.PieLegendRenderer,r.legend.preDraw=!0,r.seriesDefaults.pointLabels={show:!1})}function e(){for(var t=0;t<this.series.length;t++)this.series[t].renderer.constructor==n.jqplot.PieRenderer&&this.series[t].highlightMouseOver&&(this.series[t].highlightMouseDown=!1)}function o(){for(var t=0;t<this.series.length;t++)this.series[t].seriesColors=this.seriesColors,this.series[t].colorGenerator=n.jqplot.colorGenerator}function i(n,t,i){if(n.series[t].showSlice[i]){var r=n.series[t],u=n.plugins.pieRenderer.highlightCanvas;u._ctx.clearRect(0,0,u._ctx.canvas.width,u._ctx.canvas.height);r._highlightedPoint=i;n.plugins.pieRenderer.highlightedSeriesIndex=t;r.renderer.drawSlice.call(r,u._ctx,r._sliceAngles[i][0],r._sliceAngles[i][1],r.highlightColorGenerator.get(i),!1)}}function t(n){var i=n.plugins.pieRenderer.highlightCanvas,t;for(i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height),t=0;t<n.series.length;t++)n.series[t]._highlightedPoint=null;n.plugins.pieRenderer.highlightedSeriesIndex=null;n.target.trigger("jqplotDataUnhighlight")}function s(n,r,u,f,e){var o,h,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],h=jQuery.Event("jqplotDataMouseOver"),h.pageX=n.pageX,h.pageY=n.pageY,e.target.trigger(h,o),!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.pieRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),i(e,o[0],o[1]))):f==null&&t(e)}function h(n,r,u,f,e){var o,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],!e.series[o[0]].highlightMouseDown||o[0]==e.plugins.pieRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),i(e,o[0],o[1]))):f==null&&t(e)}function c(n,i,r,u,f){var e=f.plugins.pieRenderer.highlightedSeriesIndex;e!=null&&f.series[e].highlightMouseDown&&t(f)}function l(n,t,i,r,u){if(r){var e=[r.seriesIndex,r.pointIndex,r.data],f=jQuery.Event("jqplotDataClick");f.which=n.which;f.pageX=n.pageX;f.pageY=n.pageY;u.target.trigger(f,e)}}function a(n,i,r,u,f){var s,o,e;u&&(s=[u.seriesIndex,u.pointIndex,u.data],o=f.plugins.pieRenderer.highlightedSeriesIndex,o!=null&&f.series[o].highlightMouseDown&&t(f),e=jQuery.Event("jqplotDataRightClick"),e.which=n.which,e.pageX=n.pageX,e.pageY=n.pageY,f.target.trigger(e,s))}function v(){var i,r;this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas&&(this.plugins.pieRenderer.highlightCanvas.resetCanvas(),this.plugins.pieRenderer.highlightCanvas=null);this.plugins.pieRenderer={highlightedSeriesIndex:null};this.plugins.pieRenderer.highlightCanvas=new n.jqplot.GenericCanvas;i=n(this.targetId+" .jqplot-data-label");i.length?n(i[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this));r=this.plugins.pieRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(n){t(n.data.plot)})}n.jqplot.PieRenderer=function(){n.jqplot.LineRenderer.call(this)};n.jqplot.PieRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.PieRenderer.prototype.constructor=n.jqplot.PieRenderer;n.jqplot.PieRenderer.prototype.init=function(t,i){var f,u;if(this.diameter=null,this.padding=20,this.sliceMargin=0,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.52,this.dataLabelNudge=2,this.dataLabelCenterOn=!0,this.startAngle=0,this.tickRenderer=n.jqplot.PieTickRenderer,this.showSlice=[],this._drawData=!0,this._type="pie",t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),n.extend(!0,this,t),this.sliceMargin<0&&(this.sliceMargin=0),this._diameter=null,this._radius=null,this._sliceAngles=[],this._highlightedPoint=null,this.highlightColors.length==0)for(f=0;f<this.seriesColors.length;f++){var y=n.jqplot.getColorComponents(this.seriesColors[f]),r=[y[0],y[1],y[2]],p=r[0]+r[1]+r[2];for(u=0;u<3;u++)r[u]=p>570?r[u]*.8:r[u]+.3*(255-r[u]),r[u]=parseInt(r[u],10);this.highlightColors.push("rgb("+r[0]+","+r[1]+","+r[2]+")")}this.highlightColorGenerator=new n.jqplot.ColorGenerator(this.highlightColors);i.postParseOptionsHooks.addOnce(o);i.postInitHooks.addOnce(e);i.eventListenerHooks.addOnce("jqplotMouseMove",s);i.eventListenerHooks.addOnce("jqplotMouseDown",h);i.eventListenerHooks.addOnce("jqplotMouseUp",c);i.eventListenerHooks.addOnce("jqplotClick",l);i.eventListenerHooks.addOnce("jqplotRightClick",a);i.postDrawHooks.addOnce(v)};n.jqplot.PieRenderer.prototype.setGridData=function(){var t=[],i=[],f=this.startAngle/180*Math.PI,r=0,u,n;for(this._drawData=!1,n=0;n<this.data.length;n++)this.data[n][1]!=0&&(this._drawData=!0,this.showSlice[n]===undefined&&(this.showSlice[n]=!0)),t.push(this.data[n][1]),i.push([this.data[n][0]]),n>0&&(t[n]+=t[n-1]),r+=this.data[n][1];for(u=Math.PI*2/t[t.length-1],n=0;n<t.length;n++)i[n][1]=t[n]*u,i[n][2]=this.data[n][1]/r;this.gridData=i};n.jqplot.PieRenderer.prototype.makeGridData=function(n){var i=[],r=[],u=0,e=this.startAngle/180*Math.PI,f,t;for(this._drawData=!1,t=0;t<n.length;t++)this.data[t][1]!=0&&(this._drawData=!0),i.push(n[t][1]),r.push([n[t][0]]),t>0&&(i[t]+=i[t-1]),u+=n[t][1];for(f=Math.PI*2/i[i.length-1],t=0;t<i.length;t++)r[t][1]=i[t]*f,r[t][2]=n[t][1]/u;return r};n.jqplot.PieRenderer.prototype.drawSlice=function(n,t,i,u,f){function c(r){(i>6.282+this.startAngle&&(i=6.282+this.startAngle,t>i&&(t=6.281+this.startAngle)),t>=i)||(n.beginPath(),n.fillStyle=u,n.strokeStyle=u,n.lineWidth=a,n.arc(0,0,r,t,i,!1),n.lineTo(0,0),n.closePath(),l?n.fill():n.stroke())}var e,h;if(this._drawData){var o=this._radius,l=this.fill,a=this.lineWidth,v=this.sliceMargin;this.fill==!1&&(v+=this.lineWidth);n.save();n.translate(this._center[0],this._center[1]);var s=r(t,i,this.sliceMargin,this.fill,this.lineWidth),y=s*Math.cos((t+i)/2),p=s*Math.sin((t+i)/2);if(i-t<=Math.PI?o-=s:o+=s,n.translate(y,p),f){for(e=0,h=this.shadowDepth;e<h;e++)n.save(),n.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),c(o);for(e=0,h=this.shadowDepth;e<h;e++)n.restore()}else c(o);n.restore()}};n.jqplot.PieRenderer.prototype.draw=function(t,i,u,f){var k=u!=undefined?u:{},s=0,v=0,h=1,ht=new n.jqplot.ColorGenerator(this.seriesColors),it,o,ft,et,l,d,g,ot,a,yt,nt,e,c,tt,y;if(u.legendInfo&&u.legendInfo.placement=="insideGrid"){o=u.legendInfo;switch(o.location){case"nw":s=o.width+o.xoffset;break;case"w":s=o.width+o.xoffset;break;case"sw":s=o.width+o.xoffset;break;case"ne":s=o.width+o.xoffset;h=-1;break;case"e":s=o.width+o.xoffset;h=-1;break;case"se":s=o.width+o.xoffset;h=-1;break;case"n":v=o.height+o.yoffset;break;case"s":v=o.height+o.yoffset;h=-1}}var pt=k.shadow!=undefined?k.shadow:this.shadow,wt=k.fill!=undefined?k.fill:this.fill,rt=parseInt(t.canvas.style.width),ut=parseInt(t.canvas.style.height),ct=rt-s-2*this.padding,lt=ut-v-2*this.padding,at=Math.min(ct,lt),vt=at;for(this._sliceAngles=[],ft=this.sliceMargin,this.fill==!1&&(ft+=this.lineWidth),l=0,a=this.startAngle/180*Math.PI,e=0,nt=i.length;e<nt;e++)d=e==0?a:i[e-1][1]+a,g=i[e][1]+a,this._sliceAngles.push([d,g]),et=r(d,g,this.sliceMargin,this.fill,this.lineWidth),Math.abs(g-d)>Math.PI&&(l=Math.max(et,l));if(this._diameter=this.diameter!=null&&this.diameter>0?this.diameter-2*l:vt-2*l,this._diameter<6){n.jqplot.log("Diameter of pie too small, not rendering.");return}if(yt=this._radius=this._diameter/2,this._center=[(rt-h*s)/2+h*s+l*Math.cos(a),(ut-h*v)/2+h*v+l*Math.sin(a)],this.shadow)for(e=0,nt=i.length;e<nt;e++)ot="rgba(0,0,0,"+this.shadowAlpha+")",this.renderer.drawSlice.call(this,t,this._sliceAngles[e][0],this._sliceAngles[e][1],ot,!0);for(e=0;e<i.length;e++)if(it=ht.next(),this.showSlice[e]&&(this.renderer.drawSlice.call(this,t,this._sliceAngles[e][0],this._sliceAngles[e][1],it,!1),this.showDataLabels&&i[e][2]*100>=this.dataLabelThreshold)){tt=(this._sliceAngles[e][0]+this._sliceAngles[e][1])/2;this.dataLabels=="label"?(c=this.dataLabelFormatString||"%s",y=n.jqplot.sprintf(c,i[e][0])):this.dataLabels=="value"?(c=this.dataLabelFormatString||"%d",y=n.jqplot.sprintf(c,this.data[e][1])):this.dataLabels=="percent"?(c=this.dataLabelFormatString||"%d%%",y=n.jqplot.sprintf(c,i[e][2]*100)):this.dataLabels.constructor==Array&&(c=this.dataLabelFormatString||"%s",y=n.jqplot.sprintf(c,this.dataLabels[e]));var st=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,p=this._center[0]+Math.cos(tt)*st+this.canvas._offsets.left,w=this._center[1]+Math.sin(tt)*st+this.canvas._offsets.top,b=n('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+y+"<\/div>").insertBefore(f.eventCanvas._elem);this.dataLabelCenterOn?(p-=b.width()/2,w-=b.height()/2):(p-=b.width()*Math.sin(tt/2),w-=b.height()/2);p=Math.round(p);w=Math.round(w);b.css({left:p,top:w})}};n.jqplot.PieAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this)};n.jqplot.PieAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer;n.jqplot.PieAxisRenderer.prototype.constructor=n.jqplot.PieAxisRenderer;n.jqplot.PieAxisRenderer.prototype.init=function(t){this.tickRenderer=n.jqplot.PieTickRenderer;n.extend(!0,this,t);this._dataBounds={min:0,max:100};this.min=0;this.max=100;this.showTicks=!1;this.ticks=[];this.showMark=!1;this.show=!1};n.jqplot.PieLegendRenderer=function(){n.jqplot.TableLegendRenderer.call(this)};n.jqplot.PieLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.PieLegendRenderer.prototype.constructor=n.jqplot.PieLegendRenderer;n.jqplot.PieLegendRenderer.prototype.init=function(t){this.numberRows=null;this.numberColumns=null;this.width=null;n.extend(!0,this,t)};n.jqplot.PieLegendRenderer.prototype.draw=function(){var tt=this,g,t,i,s,b,u,o,f,h,c,k,d,r,a,v;if(this.show){g=this._series;this._elem=n(document.createElement("table"));this._elem.addClass("jqplot-table-legend");t={position:"absolute"};this.background&&(t.background=this.background);this.border&&(t.border=this.border);this.fontSize&&(t.fontSize=this.fontSize);this.fontFamily&&(t.fontFamily=this.fontFamily);this.textColor&&(t.textColor=this.textColor);this.marginTop!=null&&(t.marginTop=this.marginTop);this.marginBottom!=null&&(t.marginBottom=this.marginBottom);this.marginLeft!=null&&(t.marginLeft=this.marginLeft);this.marginRight!=null&&(t.marginRight=this.marginRight);this._elem.css(t);var y=!1,p=!1,e,l,w=g[0],nt=new n.jqplot.ColorGenerator(w.seriesColors);if(w.show)for(i=w.data,this.numberRows?(e=this.numberRows,l=this.numberColumns?this.numberColumns:Math.ceil(i.length/e)):this.numberColumns?(l=this.numberColumns,e=Math.ceil(i.length/this.numberColumns)):(e=i.length,l=1),r=0,s=0;s<e;s++)for(u=n(document.createElement("tr")),u.addClass("jqplot-table-legend"),p?u.prependTo(this._elem):u.appendTo(this._elem),b=0;b<l;b++)r<i.length&&(c="",this.labels[r]?h=this.labels[r]:typeof i[r][0]=="object"?(h=i[r][0][0].toString(),c=i[r][0][1].toString()):h=i[r][0].toString(),d=nt.next(),y=p?s==e-1?!1:!0:s>0?!0:!1,k=y?this.rowSpacing:"0",o=n(document.createElement("td")),o.addClass("jqplot-table-legend jqplot-table-legend-swatch"),o.css({textAlign:"center",paddingTop:k}),a=n(document.createElement("div")),a.addClass("jqplot-table-legend-swatch-outline"),c!==""&&a.attr("title",c),v=n(document.createElement("div")),v.addClass("jqplot-table-legend-swatch"),v.css({backgroundColor:d,borderColor:d}),o.append(a.append(v)),f=n(document.createElement("td")),f.addClass("jqplot-table-legend jqplot-table-legend-label"),f.css("paddingTop",k),this.escapeHtml?f.text(h):f.html('<a title="'+c+'">'+h+"<\/a>"),p?(f.prependTo(u),o.prependTo(u)):(o.appendTo(u),f.appendTo(u)),y=!0),r++}return this._elem};n.jqplot.PieRenderer.prototype.handleMove=function(n,r,u,f,e){if(f){var o=[f.seriesIndex,f.pointIndex,f.data];e.target.trigger("jqplotDataMouseOver",o);!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.pieRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(e.target.trigger("jqplotDataHighlight",o),i(e,o[0],o[1]))}else f==null&&t(e)};n.jqplot.preInitHooks.push(f);n.jqplot.PieTickRenderer=function(){n.jqplot.AxisTickRenderer.call(this)};n.jqplot.PieTickRenderer.prototype=new n.jqplot.AxisTickRenderer;n.jqplot.PieTickRenderer.prototype.constructor=n.jqplot.PieTickRenderer})(jQuery)