(function(n){n.jqplot.EnhancedPieLegendRenderer=function(){n.jqplot.TableLegendRenderer.call(this)};n.jqplot.EnhancedPieLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.EnhancedPieLegendRenderer.prototype.constructor=n.jqplot.EnhancedPieLegendRenderer;n.jqplot.EnhancedPieLegendRenderer.prototype.init=function(t){this.numberRows=null;this.numberColumns=null;this.seriesToggle="normal";this.seriesToggleReplot=!1;this.disableIEFading=!0;this.toolTips=[];n.extend(!0,this,t);this.seriesToggle&&n.jqplot.postDrawHooks.push(i)};n.jqplot.EnhancedPieLegendRenderer.prototype.draw=function(i,r){var ft=this,a,c,f,e,g,h,o,u,k,nt,y,p,s,it,rt;if(this.show){a=this._series;f="position:absolute;";f+=this.background?"background:"+this.background+";":"";f+=this.border?"border:"+this.border+";":"";f+=this.fontSize?"font-size:"+this.fontSize+";":"";f+=this.fontFamily?"font-family:"+this.fontFamily+";":"";f+=this.textColor?"color:"+this.textColor+";":"";f+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"";f+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"";f+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"";f+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"";this._elem=n('<table class="jqplot-table-legend" style="'+f+'"><\/table>');this.seriesToggle&&this._elem.css("z-index","3");var d=!1,w=!1,l,v,c=a[0],b=c.data.length,ut=new n.jqplot.ColorGenerator(c.seriesColors);for(this.numberRows?(l=this.numberRows,v=this.numberColumns?this.numberColumns:Math.ceil(b/l)):this.numberColumns?(v=this.numberColumns,l=Math.ceil(b/this.numberColumns)):(l=b,v=1),s=0,e=a.length-1;e>=0;e--)(v==1&&a[e]._stack||a[e].renderer.constructor==n.jqplot.BezierCurveRenderer)&&(w=!0);for(e=0;e<l;e++){for(h=n(document.createElement("tr")),h.addClass("jqplot-table-legend"),w?h.prependTo(this._elem):h.appendTo(this._elem),g=0;g<v;g++)s<b&&(k=this.labels[s]||c.data[s][0].toString(),tt=this.toolTips[s],k&&(it=ut.next(),d=w?e==l-1?!1:!0:e>0?!0:!1,nt=d?this.rowSpacing:"0",o=n(document.createElement("td")),o.addClass("jqplot-table-legend jqplot-table-legend-swatch"),o.css({textAlign:"center",paddingTop:nt}),y=n(document.createElement("div")),y.addClass("jqplot-table-legend-swatch-outline"),tt!==undefined&&y.attr("title",tt),p=n(document.createElement("div")),p.addClass("jqplot-table-legend-swatch"),p.css({backgroundColor:it,borderColor:it}),o.append(y.append(p)),u=n(document.createElement("td")),u.addClass("jqplot-table-legend jqplot-table-legend-label"),u.css("paddingTop",nt),tt!==undefined&&u.attr("title",tt),this.escapeHtml?u.text(k):u.html(k),w?(this.showLabels&&u.prependTo(h),this.showSwatches&&o.prependTo(h)):(this.showSwatches&&o.appendTo(h),this.showLabels&&u.appendTo(h)),this.seriesToggle&&((typeof this.seriesToggle=="string"||typeof this.seriesToggle=="number")&&(n.jqplot.use_excanvas&&this.disableIEFading||(rt=this.seriesToggle)),this.showSwatches&&(o.bind("click",{series:c,index:s,speed:rt,plot:r,replot:this.seriesToggleReplot},t),o.addClass("jqplot-seriesToggle")),this.showLabels&&(u.bind("click",{series:c,index:s,speed:rt,plot:r,replot:this.seriesToggleReplot},t),u.addClass("jqplot-seriesToggle")),c.showSlice[s]===!1&&c.showLabel&&(o.addClass("jqplot-series-hidden"),u.addClass("jqplot-series-hidden"))),d=!0)),s++;o=u=y=p=null}}return this._elem};var t=function(t){var i=t.data,u=i.replot,e=i.plot,f=i.index,r;i.series.showSlice[f]=i.series.showSlice[f]===!1?!0:!1;r={};n.isPlainObject(u)&&n.extend(!0,r,u);e.replot(r)},i=function(){if(this.legend.renderer.constructor==n.jqplot.EnhancedPieLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}})(jQuery)